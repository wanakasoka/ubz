<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBZ Global - Seamless Navigation</title>
    <style>
        :root { --orange: #f57c00; --blue: #2196f3; --black: #111; --white: #fff; --bg: #f0f2f5; }
        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: #333; }
        
        /* Navigation Header */
        nav { 
            background: var(--orange); 
            padding: 15px; 
            color: white; 
            display: flex; 
            align-items: center; 
            justify-content: space-between;
            position: sticky; top: 0; z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .back-btn { cursor: pointer; font-size: 20px; font-weight: bold; background: none; border: none; color: white; padding: 0 10px; }

        .page { display: none; padding: 20px; min-height: 100vh; }
        .active { display: block; }

        .card { background: white; padding: 25px; border-radius: 15px; max-width: 450px; margin: 10px auto; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { margin-bottom: 15px; color: var(--orange); text-align: center; }
        input, select { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; }
        
        .btn { background: var(--orange); color: white; border: none; padding: 15px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; margin-top: 10px; }
        .btn-outline { background: white; color: #333; border: 1px solid #ddd; margin-bottom: 10px; text-align: left; }

        /* Bus Seat Grid */
        .bus-area { background: #eee; padding: 20px; border-radius: 20px; border: 4px solid #ccc; max-width: 300px; margin: auto; }
        .grid { display: grid; grid-template-columns: 1fr 1fr 30px 1fr 1fr; gap: 10px; }
        .seat { aspect-ratio: 1/1; background: var(--blue); color: white; display: flex; align-items: center; justify-content: center; border-radius: 5px; cursor: pointer; font-size: 12px; font-weight: bold; }
        .seat.taken { background: var(--orange); cursor: not-allowed; }
        .seat.selected { background: var(--black); outline: 2px solid white; }
        .aisle { text-align: center; color: #aaa; font-size: 10px; }

        /* Ticket Layout */
        .ticket { border: 2px solid #333; border-radius: 12px; overflow: hidden; background: white; }
        .t-head { background: #333; color: white; padding: 12px; text-align: center; }
        .t-body { padding: 20px; }
        .t-row { display: flex; justify-content: space-between; border-bottom: 1px dashed #eee; padding: 8px 0; font-size: 14px; }
        .qr { width: 130px; height: 130px; margin: 20px auto; display: block; border: 1px solid #eee; }

        @media print { .no-print { display: none !important; } }
    </style>
</head>
<body>

<section id="page-auth" class="page active">
    <div class="card">
        <h2>UBZ GLOBAL</h2>
        <p style="text-align:center; color:#666; margin-bottom:15px;">Secure Login / Sign Up</p>
        <select id="country">
            <option value="+260">Zambia (+260)</option>
            <option value="+27">South Africa (+27)</option>
            <option value="+44">UK (+44)</option>
        </select>
        <input type="text" id="auth-user" placeholder="Email or Phone Number">
        <input type="password" placeholder="Password">
        <button class="btn" onclick="showPage('page-routes')">Login</button>
    </div>
</section>

<section id="page-routes" class="page">
    <nav>
        <button class="back-btn" onclick="showPage('page-auth')">←</button>
        <span>Select Route</span>
        <div style="width:30px"></div>
    </nav>
    <div class="card">
        <label>Travel Date:</label>
        <input type="date" id="date-input">
        <div class="btn btn-outline" onclick="selectRoute('Lusaka', 'Ndola', '07:30', '30 Mins Before', 350)">
            <strong>Lusaka ➔ Ndola</strong><br><small>K350 | Departs 07:30</small>
        </div>
        <div class="btn btn-outline" onclick="selectRoute('Lusaka', 'Johannesburg', '06:00', '1 Hour Before', 1250)">
            <strong>Lusaka ➔ Johannesburg</strong><br><small>K1250 | Departs 06:00</small>
        </div>
    </div>
</section>

<section id="page-details" class="page">
    <nav>
        <button class="back-btn" onclick="showPage('page-routes')">←</button>
        <span>Passenger Details</span>
        <div style="width:30px"></div>
    </nav>
    <div class="card">
        <input type="text" id="p-name" placeholder="Full Name (on ID)">
        <input type="text" id="p-phone" placeholder="Contact Number">
        <input type="text" id="p-kin" placeholder="Next of Kin Phone">
        <select id="p-luggage">
            <option value="None">No extra luggage</option>
            <option value="Standard Bag">Standard Suitcase (Free)</option>
            <option value="Excess">Excess/Cargo (Chargeable)</option>
        </select>
        <button class="btn" onclick="showPage('page-seats')">Next: Select Seat</button>
    </div>
</section>

<section id="page-seats" class="page">
    <nav>
        <button class="back-btn" onclick="showPage('page-details')">←</button>
        <span>Choose Seat</span>
        <div style="width:30px"></div>
    </nav>
    <div style="text-align:center; margin: 10px 0;">
        <small><b style="color:var(--blue)">■</b> Available | <b style="color:var(--orange)">■</b> Taken</small>
    </div>
    <div class="bus-area">
        <div class="grid" id="seat-grid"></div>
    </div>
    <div class="card" style="text-align: center;">
        <p id="seat-label" style="font-weight: bold; margin-bottom: 10px;">No seat selected</p>
        <button class="btn" onclick="showPage('page-ticket')">Generate Ticket</button>
    </div>
</section>

<section id="page-ticket" class="page">
    <nav class="no-print">
        <button class="back-btn" onclick="showPage('page-seats')">←</button>
        <span>Your Boarding Pass</span>
        <div style="width:30px"></div>
    </nav>
    <div id="ticket-container" style="padding: 10px;"></div>
</section>

<script>
    let data = { from: '', to: '', depTime: '', stopTime: '', price: 0, date: '', name: '', kin: '', lug: '', seat: '' };

    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        if (pageId === 'page-seats') renderSeats();
        if (pageId === 'page-ticket') renderTicket();
    }

    function selectRoute(from, to, time, wait, price) {
        if (!document.getElementById('date-input').value) return alert("Please select travel date");
        data.from = from; data.to = to; data.depTime = time; data.stopTime = wait; data.price = price;
        data.date = document.getElementById('date-input').value;
        showPage('page-details');
    }

    function renderSeats() {
        const grid = document.getElementById('seat-grid');
        grid.innerHTML = '';
        for (let i = 1; i <= 40; i++) {
            const col = (i - 1) % 4;
            if (col === 2) { 
                const aisle = document.createElement('div'); aisle.className='aisle'; aisle.innerText='||';
                grid.appendChild(aisle);
            }
            const s = document.createElement('div');
            s.className = 'seat';
            s.innerText = i;
            // Simulated taken seats
            if ([3, 7, 15, 22, 30].includes(i)) s.classList.add('taken');
            else {
                if (data.seat == i) s.classList.add('selected');
                s.onclick = () => {
                    document.querySelectorAll('.seat').forEach(el => el.classList.remove('selected'));
                    s.classList.add('selected');
                    data.seat = i;
                    document.getElementById('seat-label').innerText = "Selected Seat: " + i;
                };
            }
            grid.appendChild(s);
        }
    }

    function renderTicket() {
        if(!data.seat) { alert("Please go back and select a seat!"); showPage('page-seats'); return; }
        data.name = document.getElementById('p-name').value || "Guest";
        data.kin = document.getElementById('p-kin').value || "N/A";
        data.lug = document.getElementById('p-luggage').value;
        
        const container = document.getElementById('ticket-container');
        container.innerHTML = `
            <div class="ticket">
                <div class="t-head">UBZ OFFICIAL BOARDING PASS</div>
                <div class="t-body">
                    <div class="t-row"><span>Passenger Name:</span> <strong>${data.name}</strong></div>
                    <div class="t-row"><span>Next of Kin:</span> <strong>${data.kin}</strong></div>
                    <hr style="margin:10px 0;">
                    <div class="t-row"><span>Departure Town:</span> <strong>${data.from}</strong></div>
                    <div class="t-row"><span>Destination Town:</span> <strong>${data.to}</strong></div>
                    <div class="t-row"><span>Travel Date:</span> <strong>${data.date}</strong></div>
                    <div class="t-row"><span>Departure Time:</span> <strong>${data.depTime} hrs</strong></div>
                    <div class="t-row"><span>Boarding Stop Time:</span> <strong style="color:var(--orange)">${data.stopTime}</strong></div>
                    <div class="t-row"><span>Seat Number:</span> <strong style="color:var(--blue); font-size:1.4rem;">${data.seat}</strong></div>
                    <div class="t-row"><span>Luggage status:</span> <strong>${data.lug}</strong></div>
                    
                    <img class="qr" src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=UBZ-TICKET-${data.seat}-${data.name}">
                    
                    <button class="btn no-print" onclick="window.print()">Download Ticket (PDF)</button>
                    <button class="btn no-print" style="background:#444;" onclick="showPage('page-seats')">Change Seat Number</button>
                </div>
            </div>
        `;
    }
</script>

</body>
</html>